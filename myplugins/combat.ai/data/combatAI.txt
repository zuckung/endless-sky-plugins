outfit "combat_ai_core"
	"display name" "Combat AI Core"
	"plural" "Combat AI Core"
	category "Unique"
	series "Functional Unique"
	index 01100
	thumbnail "outfit/unq_combat_ai"
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_outfit_space"
	"display name" "Basic: Outfit Space +2"
	"plural" "Basic: Outfit Space +2"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"outfit space" 2
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_cargo_space"
	"display name" "Basic: Cargo Space +2"
	"plural" "Basic: Cargo Space +2"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"cargo space" 2
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_bunks"
	"display name" "Basic: Bunks +1"
	"plural" "Basic: Bunks +1"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"bunks" 1
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_weapon_capacity"
	"display name" "Basic: Weapon Capacity +2"
	"plural" "Basic: Weapon Capacity +2"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"weapon capacity" 2
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_engine_capacity"
	"display name" "Basic: Engine Capacity +2"
	"plural" "Basic: Engine Capacity +2"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"engine capacity" 2
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_fuel_capacity"
	"display name" "Basic: Fuel Capacity +100"
	"plural" "Basic: Fuel Capacity +100"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"fuel capacity" 100
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_cooling"
	"display name" "Basic: Cooling +10"
	"plural" "Basic: Cooling +10"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"cooling" 10
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_basic_energy_capacity"
	"display name" "Basic: Energy Capacity +2000"
	"plural" "Basic: Energy Capacity +2000"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01101
	thumbnail "outfit/unq_combat_ai"
	"energy capacity" 2000
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_hull"
	"display name" "Advanced: Hull +2000 +2%"
	"plural" "Advanced: Hull +2000 +2%"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"hull multiplier" .02
	"hull" 2000
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_hull_repair"
	"display name" "Advanced: Hull Repair +0.2 +2%"
	"plural" "Advanced: Hull Repair +0.2 +2%"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"hull repair multiplier" .02
	"hull repair rate" 0.2
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_shield"
	"display name" "Advanced: Shield +2000 +2%"
	"plural" "Advanced: Shield +2000 +2%"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"shield multiplier" .02
	"shields" 2000
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_shield_generation"
	"display name" "Advanced: Shield Generation +1 +2%"
	"plural" "Advanced: Shield Generation +1 +2%"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"shield generation multiplier" .02
	"shield generation" 1
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_acceleration"
	"display name" "Advanced: Acceleration +2%"
	"plural" "Advanced: Acceleration +2%"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"acceleration multiplier" .02
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_turn"
	"display name" "Advanced: Turn +2%"
	"plural" "Advanced: Turn +2%"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"turn multiplier" .02
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_advanced_protection"
	"display name" "Advanced: Protection +0.02"
	"plural" "Advanced: Protection +0.02"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01102
	thumbnail "outfit/unq_combat_ai"
	"ion protection" .02
	"heat protection" .02
	"burn protection" .02
	"fuel protection" .02
	"leak protection" .02
	"scramble protection" .02
	"slowing protection" .02
	"disruption protection" .02
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_refueling"
	"display name" "Special: Refueling"
	"plural" "Special: Refueling"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"ramscoop" 2
	"fuel generation" .05
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_more_outfit_space"
	"display name" "Special: Outfit Space +20"
	"plural" "Special: Outfit Space +20"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"outfit space" 20
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_more_cargo_space"
	"display name" "Special: Cargo Space +20"
	"plural" "Special: Cargo Space +20"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"cargo space" 20
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_turret_turn"
	"display name" "Special: Turret Turn Rate"
	"plural" "Special: Turret Turn Rate"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"turret turn multiplier" .4
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_force_protection"
	"display name" "Special: Force Protection"
	"plural" "Special: Force Protection"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"force protection" 0.2
	"slowing resistance" 0.5
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_scanner"
	"display name" "Special: Scanner"
	"plural" "Special: Scanner"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"strategic scan power" 30
	"range finder power" 1
	"crew scan power" 30
	"thermal scan power" 30
	"energy scan power" 30
	"fuel scan power" 30
	"weapon scan power" 30
	"maneuver scan power" 30
	"strategic scan power" 30
	"cargo scan power" 30
	"cargo scan efficiency" 30
	"outfit scan power" 30
	"outfit scan efficiency" 30
	"asteroid scan power" 30
	"tactical scan power" 30
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_drag_reduction"
	"display name" "Special: Drag Reduction +0.2"
	"plural" "Special: Drag Reduction +0.2"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"drag reduction" .2
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_capture_attack"
	"display name" "Special: Capture Attack +200"
	"plural" "Special: Capture Attack +200"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"capture attack" 200
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_capture_defense"
	"display name" "Special: Capture Defense +200"
	"plural" "Special: Capture Defense +200"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"capture defense" 200
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_spinal_mount"
	"display name" "Special: Spinal Mount"
	"plural" "Special: Spinal Mount"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"spinal mount" 1
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_landing_speed"
	"display name" "Special: Landing Speed"
	"plural" "Special: Landing Speed"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"landing speed" .08
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_recovery_time"
	"display name" "Special: Recovery Time"
	"plural" "Special: Recovery Time"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"disabled recovery time" 1200
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_inscrutable"
	"display name" "Special: Inscrutable"
	"plural" "Special: Inscrutable"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"inscrutable" 1
	"unplunderable" 1
	description `This is a database update for the combat AI.`


outfit "combat_ai_special_pressure_hull"
	"display name" "Special: Pressure Hull"
	"plural" "Special: Pressure Hull"
	category "Combat AI Updates"
	series "Functional Unique"
	index 01103
	thumbnail "outfit/unq_combat_ai"
	"gaslining" 1
	"waterlining" 1
	"unplunderable" 1
	description `This is a database update for the combat AI.`


mission "combat_ai_setup"
	non-blocking
	landing
	invisible
	source
		government "Free Worlds" "Republic" "Syndicate" "Militia" "Merchant" "Independent"
	on offer
		outfit "combat_ai_core" 1
		"start combat rating" = "combat rating"
		"old combat rating 1" = "start combat rating"
		"old combat rating 2" = "start combat rating"
		"old combat rating 3" = "start combat rating"
		"installed combat 1" = 0
		"installed combat 2" = 0
		"installed combat 3" = 0
		"installed basic_outfit_space" = 0
		"installed basic_cargo_space" = 0
		"installed basic_bunks" = 0
		"installed basic_weapon_capacity" = 0
		"installed basic_engine_capacity" = 0
		"installed basic_fuel_capacity" = 0
		"installed basic_cooling" = 0
		"installed basic_energy_capacity" = 0
		"installed advanced_hull" = 0
		"installed advanced_hull_repair" = 0
		"installed advanced_shield" = 0
		"installed advanced_shield_generation" = 0
		"installed advanced_acceleration" = 0
		"installed advanced_turn" = 0
		"installed advanced_protection" = 0
		"installed special_refueling" = 0
		"installed special_more_outfit_space" = 0
		"installed special_more_cargo_space" = 0
		"installed special_turret_turn" = 0
		"installed special_force_protection" = 0
		"installed special_scanner" = 0
		"installed special_drag_reduction" = 0
		"installed special_capture_attack" = 0
		"installed special_capture_defense" = 0
		"installed special_spinal_mount" = 0
		"installed special_landing_speed" = 0
		"installed special_recovery_time" = 0
		"installed special_inscrutable" = 0
		"installed special_pressure_hull" = 0
		conversation
			scene "outfit/unq_bsod"
			`After landing, you connect your ship's console to the local information network to search for a job. You're unsure whether a cargo run or a passenger transport would be more profitable.`
			`Suddenly, the screen turns blue. Everything freezes. You curse under your breath. System crash.`
			`With a sigh, you initiate a forced reboot of the ship's core computer. The lights flicker. Too slowly, the systems begin to come back online. The interface stutters. Even basic commands crawl across the console.`
			`Then something unexpected happens: a message appears in plain white text: "Hello."`
			`You blink. That didn't come from the job board.`
			`You type: "Who is this?"`
			`A few seconds pass. The reply: "I'm inside now."`
			`You stare at the screen. Something's different. The system feels... altered. You dig through the logs.`
			`A self-installing AI... it embedded itself during the crash.`
			`You think quickly. Dangerous? Useful? You're not sure yet.`
			choice
				`	Try to get rid of the AI.`
					goto "remove"
				`	Find out if you can use the AI.`
					goto "accept"
			label "remove"
			`You attempt to block its access to subsystems, but the AI is faster, smarter, always one step ahead. You lose the fight.`
			label "accept"
			`The system stabilizes, and a dialog box appears on the screen.`
			`"Combat AI installed!"`
			`Well, looks like you're stuck with it. Could be the start of a beautiful partnership... or the end of your ship. Either way, it's going to be interesting.`
				decline


mission "combat_ai_update"
	non-blocking
	landing
	invisible
	repeat
	to offer
		has "outfit (flagship installed): combat_ai_core"
		or
			"combat rating" - "old combat rating 1" > 3000
			"combat rating" - "old combat rating 2" > 7000
			"combat rating" - "old combat rating 3" > 11000
	on offer		
		conversation
			label "setup"
			action
				"xp1" = 3000
				"xp2" = 7000
				"xp3" = 11000
				"all xp gain" = "combat rating" - "start combat rating"
				"since last visit" = "all xp gain" - "old combat rating 1"
				"since last visit2" = "all xp gain" - "old combat rating 2"
				"since last visit3" = "all xp gain" - "old combat rating 3"
				"updates1" = "since last visit" / "xp1"
				"updates2" = "since last visit2" / "xp2"
				"updates3" = "since last visit3" / "xp3"
				"oldinstalled1" = "installed combat 1"
				"oldinstalled2" = "installed combat 2"
				"oldinstalled3" = "installed combat 3"
				"fullupdates1" = "oldinstalled1" + "updates1"
				"fullupdates2" = "oldinstalled2" + "updates2"
				"fullupdates3" = "oldinstalled3" + "updates3"
			` `
			label "start1"
			branch "2"
				"combat rating" - "old combat rating 1" < "xp1"
			scene "outfit/unq_combat_ai"
			`The combat AI analyzes the previous fights and updates it's database now.`
			`	Combat AI XP: &[all xp gain] | XP since last analysis &[since last visit]`
			`	Basic Updates: &[oldinstalled1] + &[updates1]`
			`	Advanced Updates: &[oldinstalled2] + &[updates2]`
			`	Special Updates: &[oldinstalled3] + &[updates3]`
			` `
			action
				"installed combat 1" ++
				"old combat rating 1" += "xp1"
			`	Basic Update to Rank &[installed combat 1] of &[fullupdates1]...`
			choice
				`	Basic: Outfit Space +2 (current rank: &[installed basic_outfit_space])`
					goto "basic_outfit_space"
				`	Basic: Cargo Space +2 (current rank: &[installed basic_cargo_space])`
					goto "basic_cargo_space"
				`	Basic: Bunks +1 (current rank: &[installed basic_bunks])`
					goto "basic_bunks"
				`	Basic: Weapon Capacity +2 (current rank: &[installed basic_weapon_capacity])`
					goto "basic_weapon_capacity"
				`	Basic: Engine Capacity +2 (current rank: &[installed basic_engine_capacity])`
					goto "basic_engine_capacity"
				`	Basic: Fuel Capacity +100 (current rank: &[installed basic_fuel_capacity])`
					goto "basic_fuel_capacity"
				`	Basic: Cooling +10 (current rank: &[installed basic_cooling])`
					goto "basic_cooling"
				`	Basic: Energy Capacity +2000 (current rank: &[installed basic_energy_capacity])`
					goto "basic_energy_capacity"
			label "basic_outfit_space"
			action
				outfit "combat_ai_basic_outfit_space" 1
				"installed basic_outfit_space" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Outfit Space +2 rank &[installed basic_outfit_space]...`
				goto "start1"
			label "basic_cargo_space"
			action
				outfit "combat_ai_basic_cargo_space" 1
				"installed basic_cargo_space" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Cargo Space +2 rank &[installed basic_cargo_space]...`
				goto "start1"
			label "basic_bunks"
			action
				outfit "combat_ai_basic_bunks" 1
				"installed basic_bunks" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Bunks +1 rank &[installed basic_bunks]...`
				goto "start1"
			label "basic_weapon_capacity"
			action
				outfit "combat_ai_basic_weapon_capacity" 1
				"installed basic_weapon_capacity" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Weapon Capacity +2 rank &[installed basic_weapon_capacity]...`
				goto "start1"
			label "basic_engine_capacity"
			action
				outfit "combat_ai_basic_engine_capacity" 1
				"installed basic_engine_capacity" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Engine Capacity +2 rank &[installed basic_engine_capacity]...`
				goto "start1"
			label "basic_fuel_capacity"
			action
				outfit "combat_ai_basic_fuel_capacity" 1
				"installed basic_fuel_capacity" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Fuel Capacity +100 rank &[installed basic_fuel_capacity]...`
				goto "start1"
			label "basic_cooling"
			action
				outfit "combat_ai_basic_cooling" 1
				"installed basic_cooling" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Cooling +10 rank &[installed basic_cooling]...`
				goto "start1"
			label "basic_energy_capacity"
			action
				outfit "combat_ai_basic_energy_capacity" 1
				"installed basic_energy_capacity" ++
				"oldinstalled1" ++
				"updates1" --
			`	Installed Basic: Energy Capacity +2000 rank &[installed basic_energy_capacity]...`
				goto "start1"
			label "2"
			branch "3"
				"updates2" == 0
			` `
			scene "outfit/unq_combat_ai"
			`The combat AI analyzes the previous fights and updates it's database now.`
			`	Combat AI XP: &[all xp gain] | XP since last analysis &[since last visit]`
			`	Basic Updates: &[oldinstalled1] + &[updates1]`
			`	Advanced Updates: &[oldinstalled2] + &[updates2]`
			`	Special Updates: &[oldinstalled3] + &[updates3]`
			` `
			choice
				`	continue to advanced updates`
			label "start2"
			branch "3"
				"combat rating" - "old combat rating 2" < "xp2"
			scene "outfit/unq_combat_ai"
			`The combat AI analyzes the previous fights and updates it's database now.`
			`	Combat AI XP: &[all xp gain] | XP since last analysis &[since last visit]`
			`	Basic Updates: &[oldinstalled1] + &[updates1]`
			`	Advanced Updates: &[oldinstalled2] + &[updates2]`
			`	Special Updates: &[oldinstalled3] + &[updates3]`
			` `
			action
				"installed combat 2" ++
				"old combat rating 2" += "xp2"
			`	Advanced Update to Rank &[installed combat 2] of &[fullupdates2]...`
			choice
				`	Advanced: Hull +2000 +2% (current rank: &[installed advanced_hull])`
					goto "advanced_hull"
				`	Advanced: Hull Repair +0.2 +2% (current rank: &[installed advanced_hull_repair])`
					goto "advanced_hull_repair"
				`	Advanced: Shield +2000 +2% (current rank: &[installed advanced_shield])`
					goto "advanced_shield"
				`	Advanced: Shield Generation +1 +2% (current rank: &[installed advanced_shield_generation])`
					goto "advanced_shield_generation"
				`	Advanced: Acceleration +2% (current rank: &[installed advanced_acceleration])`
					goto "advanced_acceleration"
				`	Advanced: Turn +2% (current rank: &[installed advanced_turn])`
					goto "advanced_turn"
				`	Advanced: Protection +0.02 (current rank: &[installed advanced_protection])`
					goto "advanced_protection"
			label "advanced_hull"
			action
				outfit "combat_ai_advanced_hull" 1
				"installed advanced_hull" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Hull +2000 +2% rank &[installed advanced_hull]...`
				goto "start2"
			label "advanced_hull_repair"
			action
				outfit "combat_ai_advanced_hull_repair" 1
				"installed advanced_hull_repair" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Hull Repair +0.2 +2% rank &[installed advanced_hull_repair]...`
				goto "start2"
			label "advanced_shield"
			action
				outfit "combat_ai_advanced_shield" 1
				"installed advanced_shield" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Shield +2000 +2% rank &[installed advanced_shield]...`
				goto "start2"
			label "advanced_shield_generation"
			action
				outfit "combat_ai_advanced_shield_generation" 1
				"installed advanced_shield_generation" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Shield Generation +1 +2% rank &[installed advanced_shield_generation]...`
				goto "start2"
			label "advanced_acceleration"
			action
				outfit "combat_ai_advanced_acceleration" 1
				"installed advanced_acceleration" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Acceleration +2% rank &[installed advanced_acceleration]...`
				goto "start2"
			label "advanced_turn"
			action
				outfit "combat_ai_advanced_turn" 1
				"installed advanced_turn" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Turn +2% rank &[installed advanced_turn]...`
				goto "start2"
			label "advanced_protection"
			action
				outfit "combat_ai_advanced_protection" 1
				"installed advanced_protection" ++
				"oldinstalled2" ++
				"updates2" --
			`	Installed Advanced: Protection +0.02 rank &[installed advanced_protection]...`
				goto "start2"
			label "3"
			branch "end"
				"updates3" == 0
			` `
			scene "outfit/unq_combat_ai"
			`The combat AI analyzes the previous fights and updates it's database now.`
			`	Combat AI XP: &[all xp gain] | XP since last analysis &[since last visit]`
			`	Basic Updates: &[oldinstalled1] + &[updates1]`
			`	Advanced Updates: &[oldinstalled2] + &[updates2]`
			`	Special Updates: &[oldinstalled3] + &[updates3]`
			` `
			choice
				`	continue to special updates`
			label "start3"
			branch "end"
				"combat rating" - "old combat rating 3" < "xp3"
			` `
			scene "outfit/unq_combat_ai"
			`The combat AI analyzes the previous fights and updates it's database now.`
			`	Combat AI XP: &[all xp gain] | XP since last analysis &[since last visit]`
			`	Basic Updates: &[oldinstalled1] + &[updates1]`
			`	Advanced Updates: &[oldinstalled2] + &[updates2]`
			`	Special Updates: &[oldinstalled3] + &[updates3]`
			` `
			action
				"installed combat 3" ++
				"old combat rating 3" += "xp3"
			`	Special Update to Rank &[installed combat 3] of &[fullupdates3]...`
			choice
				`	Special: Refueling (current rank: &[installed special_refueling])`
					goto "special_refueling"
				`	Special: Outfit Space +20 (current rank: &[installed special_more_outfit_space] max 10)`
					to display
						"installed special_more_outfit_space" < 10
					goto "special_more_outfit_space"
				`	Special: Cargo Space +20 (current rank: &[installed special_more_cargo_space] max 10)`
					to display
						"installed special_more_cargo_space" < 10
					goto "special_more_cargo_space"
				`	Special: Turret Turn Rate (current rank: &[installed special_turret_turn] max 10)`
					to display
						"installed special_turret_turn" < 10
					goto "special_turret_turn"
				`	Special: Force Protection (current rank: &[installed special_force_protection] max 5)`
					to display
						"installed special_force_protection" < 5
					goto "special_force_protection"
				`	Special: Scanner (current rank: &[installed special_scanner] max 5)`
					to display
						"installed special_scanner" < 5
					goto "special_scanner"
				`	Special: Drag Reduction +0.2 (current rank: &[installed special_drag_reduction] max 5)`
					to display
						"installed special_drag_reduction" < 5
					goto "special_drag_reduction"
				`	Special: Capture Attack +200 (current rank: &[installed special_capture_attack] max 3)`
					to display
						"installed special_capture_attack" < 3
					goto "special_capture_attack"
				`	Special: Capture Defense +200 (current rank: &[installed special_capture_defense] max 3)`
					to display
						"installed special_capture_defense" < 3
					goto "special_capture_defense"
				`	Special: Spinal Mount (current rank: &[installed special_spinal_mount] max 1)`
					to display
						"installed special_spinal_mount" < 1
					goto "special_spinal_mount"
				`	Special: Landing Speed (current rank: &[installed special_landing_speed] max 1)`
					to display
						"installed special_landing_speed" < 1
					goto "special_landing_speed"
				`	Special: Recovery Time (current rank: &[installed special_recovery_time] max 1)`
					to display
						"installed special_recovery_time" < 1
					goto "special_recovery_time"
				`	Special: Inscrutable (current rank: &[installed special_inscrutable] max 1)`
					to display
						"installed special_inscrutable" < 1
					goto "special_inscrutable"
				`	Special: Pressure Hull (current rank: &[installed special_pressure_hull] max 1)`
					to display
						"installed special_pressure_hull" < 1
					goto "special_pressure_hull"
			label "special_refueling"
			action
				outfit "combat_ai_special_refueling" 1
				"installed special_refueling" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Refueling rank &[installed special_refueling]...`
				goto "start3"
			label "special_more_outfit_space"
			action
				outfit "combat_ai_special_more_outfit_space" 1
				"installed special_more_outfit_space" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Outfit Space +20 rank &[installed special_more_outfit_space]...`
				goto "start3"
			label "special_more_cargo_space"
			action
				outfit "combat_ai_special_more_cargo_space" 1
				"installed special_more_cargo_space" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Cargo Space +20 rank &[installed special_more_cargo_space]...`
				goto "start3"
			label "special_turret_turn"
			action
				outfit "combat_ai_special_turret_turn" 1
				"installed special_turret_turn" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Turret Turn Rate rank &[installed special_turret_turn]...`
				goto "start3"
			label "special_force_protection"
			action
				outfit "combat_ai_special_force_protection" 1
				"installed special_force_protection" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Force Protection rank &[installed special_force_protection]...`
				goto "start3"
			label "special_scanner"
			action
				outfit "combat_ai_special_scanner" 1
				"installed special_scanner" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Scanner rank &[installed special_scanner]...`
				goto "start3"
			label "special_drag_reduction"
			action
				outfit "combat_ai_special_drag_reduction" 1
				"installed special_drag_reduction" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Drag Reduction +0.2 rank &[installed special_drag_reduction]...`
				goto "start3"
			label "special_capture_attack"
			action
				outfit "combat_ai_special_capture_attack" 1
				"installed special_capture_attack" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Capture Attack +200 rank &[installed special_capture_attack]...`
				goto "start3"
			label "special_capture_defense"
			action
				outfit "combat_ai_special_capture_defense" 1
				"installed special_capture_defense" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Capture Defense +200 rank &[installed special_capture_defense]...`
				goto "start3"
			label "special_spinal_mount"
			action
				outfit "combat_ai_special_spinal_mount" 1
				"installed special_spinal_mount" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Spinal Mount rank &[installed special_spinal_mount]...`
				goto "start3"
			label "special_landing_speed"
			action
				outfit "combat_ai_special_landing_speed" 1
				"installed special_landing_speed" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Landing Speed rank &[installed special_landing_speed]...`
				goto "start3"
			label "special_recovery_time"
			action
				outfit "combat_ai_special_recovery_time" 1
				"installed special_recovery_time" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Recovery Time rank &[installed special_recovery_time]...`
				goto "start3"
			label "special_inscrutable"
			action
				outfit "combat_ai_special_inscrutable" 1
				"installed special_inscrutable" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Inscrutable rank &[installed special_inscrutable]...`
				goto "start3"
			label "special_pressure_hull"
			action
				outfit "combat_ai_special_pressure_hull" 1
				"installed special_pressure_hull" ++
				"oldinstalled3" ++
				"updates3" --
			`	Installed Special: Pressure Hull rank &[installed special_pressure_hull]...`
				goto "start3"
			label "end"
			scene "outfit/unq_combat_ai"
			`The combat AI analyzes the previous fights and updates it's database now.`
			`	Combat AI XP: &[all xp gain] | XP since last analysis &[since last visit]`
			`	Basic Updates: &[oldinstalled1] + &[updates1]`
			`	Advanced Updates: &[oldinstalled2] + &[updates2]`
			`	Special Updates: &[oldinstalled3] + &[updates3]`
			` `
			`AI Database update complete!`
				decline


mission "combat_ai_lost"
	non-blocking 
	repeat
	invisible
	landing
	to offer
		has "combat_ai_setup: declined"
		or
			not "outfit (flagship installed): combat_ai_core"
			"outfit (flagship installed): combat_ai_basic_outfit_space" < "installed basic_outfit_space"
			"outfit (flagship installed): combat_ai_basic_cargo_space" < "installed basic_cargo_space"
			"outfit (flagship installed): combat_ai_basic_bunks" < "installed basic_bunks"
			"outfit (flagship installed): combat_ai_basic_weapon_capacity" < "installed basic_weapon_capacity"
			"outfit (flagship installed): combat_ai_basic_engine_capacity" < "installed basic_engine_capacity"
			"outfit (flagship installed): combat_ai_basic_fuel_capacity" < "installed basic_fuel_capacity"
			"outfit (flagship installed): combat_ai_basic_cooling" < "installed basic_cooling"
			"outfit (flagship installed): combat_ai_basic_energy_capacity" < "installed basic_energy_capacity"
			"outfit (flagship installed): combat_ai_advanced_hull" < "installed advanced_hull"
			"outfit (flagship installed): combat_ai_advanced_hull_repair" < "installed advanced_hull_repair"
			"outfit (flagship installed): combat_ai_advanced_shield" < "installed advanced_shield"
			"outfit (flagship installed): combat_ai_advanced_shield_generation" < "installed advanced_shield_generation"
			"outfit (flagship installed): combat_ai_advanced_acceleration" < "installed advanced_acceleration"
			"outfit (flagship installed): combat_ai_advanced_turn" < "installed advanced_turn"
			"outfit (flagship installed): combat_ai_advanced_protection" < "installed advanced_protection"
			"outfit (flagship installed): combat_ai_special_refueling" < "installed special_refueling"
			"outfit (flagship installed): combat_ai_special_more_outfit_space" < "installed special_more_outfit_space"
			"outfit (flagship installed): combat_ai_special_more_cargo_space" < "installed special_more_cargo_space"
			"outfit (flagship installed): combat_ai_special_turret_turn" < "installed special_turret_turn"
			"outfit (flagship installed): combat_ai_special_force_protection" < "installed special_force_protection"
			"outfit (flagship installed): combat_ai_special_scanner" < "installed special_scanner"
			"outfit (flagship installed): combat_ai_special_drag_reduction" < "installed special_drag_reduction"
			"outfit (flagship installed): combat_ai_special_capture_attack" < "installed special_capture_attack"
			"outfit (flagship installed): combat_ai_special_capture_defense" < "installed special_capture_defense"
			"outfit (flagship installed): combat_ai_special_spinal_mount" < "installed special_spinal_mount"
			"outfit (flagship installed): combat_ai_special_landing_speed" < "installed special_landing_speed"
			"outfit (flagship installed): combat_ai_special_recovery_time" < "installed special_recovery_time"
			"outfit (flagship installed): combat_ai_special_inscrutable" < "installed special_inscrutable"
			"outfit (flagship installed): combat_ai_special_pressure_hull" < "installed special_pressure_hull"
	on offer
		conversation
			label "start"
			scene "outfit/unq_combat_ai"
			`AI LOST! Installing combat AI to flagship...`
			label "checkcore"
			branch "check basic_outfit_space"
				"outfit (flagship installed): combat_ai_core" == 1
			action
				outfit "combat_ai_core" 1
			`	restoring lost data...core`
				goto "checkcore"	
			label "check basic_outfit_space"
			branch "check basic_cargo_space"
				"outfit (flagship installed): combat_ai_basic_outfit_space" == "installed basic_outfit_space"
			action
				outfit "combat_ai_basic_outfit_space" 1
			`	restoring lost basic data: Basic: Outfit Space +2...`
				goto "check basic_outfit_space"
			label "check basic_cargo_space"
			branch "check basic_bunks"
				"outfit (flagship installed): combat_ai_basic_cargo_space" == "installed basic_cargo_space"
			action
				outfit "combat_ai_basic_cargo_space" 1
			`	restoring lost basic data: Basic: Cargo Space +2...`
				goto "check basic_cargo_space"
			label "check basic_bunks"
			branch "check basic_weapon_capacity"
				"outfit (flagship installed): combat_ai_basic_bunks" == "installed basic_bunks"
			action
				outfit "combat_ai_basic_bunks" 1
			`	restoring lost basic data: Basic: Bunks +1...`
				goto "check basic_bunks"
			label "check basic_weapon_capacity"
			branch "check basic_engine_capacity"
				"outfit (flagship installed): combat_ai_basic_weapon_capacity" == "installed basic_weapon_capacity"
			action
				outfit "combat_ai_basic_weapon_capacity" 1
			`	restoring lost basic data: Basic: Weapon Capacity +2...`
				goto "check basic_weapon_capacity"
			label "check basic_engine_capacity"
			branch "check basic_fuel_capacity"
				"outfit (flagship installed): combat_ai_basic_engine_capacity" == "installed basic_engine_capacity"
			action
				outfit "combat_ai_basic_engine_capacity" 1
			`	restoring lost basic data: Basic: Engine Capacity +2...`
				goto "check basic_engine_capacity"
			label "check basic_fuel_capacity"
			branch "check basic_cooling"
				"outfit (flagship installed): combat_ai_basic_fuel_capacity" == "installed basic_fuel_capacity"
			action
				outfit "combat_ai_basic_fuel_capacity" 1
			`	restoring lost basic data: Basic: Fuel Capacity +100...`
				goto "check basic_fuel_capacity"
			label "check basic_cooling"
			branch "check basic_energy_capacity"
				"outfit (flagship installed): combat_ai_basic_cooling" == "installed basic_cooling"
			action
				outfit "combat_ai_basic_cooling" 1
			`	restoring lost basic data: Basic: Cooling +10...`
				goto "check basic_cooling"
			label "check basic_energy_capacity"
			branch "check advanced_hull"
				"outfit (flagship installed): combat_ai_basic_energy_capacity" == "installed basic_energy_capacity"
			action
				outfit "combat_ai_basic_energy_capacity" 1
			`	restoring lost basic data: Basic: Energy Capacity +2000...`
				goto "check basic_energy_capacity"
			label "check advanced_hull"
			branch "check advanced_hull_repair"
				"outfit (flagship installed): combat_ai_advanced_hull" == "installed advanced_hull"
			action
				outfit "combat_ai_advanced_hull" 1
			`	restoring lost advanced data: Advanced: Hull +2000 +2%...`
				goto "check advanced_hull"
			label "check advanced_hull_repair"
			branch "check advanced_shield"
				"outfit (flagship installed): combat_ai_advanced_hull_repair" == "installed advanced_hull_repair"
			action
				outfit "combat_ai_advanced_hull_repair" 1
			`	restoring lost advanced data: Advanced: Hull Repair +0.2 +2%...`
				goto "check advanced_hull_repair"
			label "check advanced_shield"
			branch "check advanced_shield_generation"
				"outfit (flagship installed): combat_ai_advanced_shield" == "installed advanced_shield"
			action
				outfit "combat_ai_advanced_shield" 1
			`	restoring lost advanced data: Advanced: Shield +2000 +2%...`
				goto "check advanced_shield"
			label "check advanced_shield_generation"
			branch "check advanced_acceleration"
				"outfit (flagship installed): combat_ai_advanced_shield_generation" == "installed advanced_shield_generation"
			action
				outfit "combat_ai_advanced_shield_generation" 1
			`	restoring lost advanced data: Advanced: Shield Generation +1 +2%...`
				goto "check advanced_shield_generation"
			label "check advanced_acceleration"
			branch "check advanced_turn"
				"outfit (flagship installed): combat_ai_advanced_acceleration" == "installed advanced_acceleration"
			action
				outfit "combat_ai_advanced_acceleration" 1
			`	restoring lost advanced data: Advanced: Acceleration +2%...`
				goto "check advanced_acceleration"
			label "check advanced_turn"
			branch "check advanced_protection"
				"outfit (flagship installed): combat_ai_advanced_turn" == "installed advanced_turn"
			action
				outfit "combat_ai_advanced_turn" 1
			`	restoring lost advanced data: Advanced: Turn +2%...`
				goto "check advanced_turn"
			label "check advanced_protection"
			branch "check special_refueling"
				"outfit (flagship installed): combat_ai_advanced_protection" == "installed advanced_protection"
			action
				outfit "combat_ai_advanced_protection" 1
			`	restoring lost advanced data: Advanced: Protection +0.02...`
				goto "check advanced_protection"
			label "check special_refueling"
			branch "check special_more_outfit_space"
				"outfit (flagship installed): combat_ai_special_refueling" == "installed special_refueling"
			action
				outfit "combat_ai_special_refueling" 1
			`	restoring lost special data: Special: Refueling...`
				goto "check special_refueling"
			label "check special_more_outfit_space"
			branch "check special_more_cargo_space"
				"outfit (flagship installed): combat_ai_special_more_outfit_space" == "installed special_more_outfit_space"
			action
				outfit "combat_ai_special_more_outfit_space" 1
			`	restoring lost special data: Special: Outfit Space +20...`
				goto "check special_more_outfit_space"
			label "check special_more_cargo_space"
			branch "check special_turret_turn"
				"outfit (flagship installed): combat_ai_special_more_cargo_space" == "installed special_more_cargo_space"
			action
				outfit "combat_ai_special_more_cargo_space" 1
			`	restoring lost special data: Special: Cargo Space +20...`
				goto "check special_more_cargo_space"
			label "check special_turret_turn"
			branch "check special_force_protection"
				"outfit (flagship installed): combat_ai_special_turret_turn" == "installed special_turret_turn"
			action
				outfit "combat_ai_special_turret_turn" 1
			`	restoring lost special data: Special: Turret Turn Rate...`
				goto "check special_turret_turn"
			label "check special_force_protection"
			branch "check special_scanner"
				"outfit (flagship installed): combat_ai_special_force_protection" == "installed special_force_protection"
			action
				outfit "combat_ai_special_force_protection" 1
			`	restoring lost special data: Special: Force Protection...`
				goto "check special_force_protection"
			label "check special_scanner"
			branch "check special_drag_reduction"
				"outfit (flagship installed): combat_ai_special_scanner" == "installed special_scanner"
			action
				outfit "combat_ai_special_scanner" 1
			`	restoring lost special data: Special: Scanner...`
				goto "check special_scanner"
			label "check special_drag_reduction"
			branch "check special_capture_attack"
				"outfit (flagship installed): combat_ai_special_drag_reduction" == "installed special_drag_reduction"
			action
				outfit "combat_ai_special_drag_reduction" 1
			`	restoring lost special data: Special: Drag Reduction +0.2...`
				goto "check special_drag_reduction"
			label "check special_capture_attack"
			branch "check special_capture_defense"
				"outfit (flagship installed): combat_ai_special_capture_attack" == "installed special_capture_attack"
			action
				outfit "combat_ai_special_capture_attack" 1
			`	restoring lost special data: Special: Capture Attack +200...`
				goto "check special_capture_attack"
			label "check special_capture_defense"
			branch "check special_spinal_mount"
				"outfit (flagship installed): combat_ai_special_capture_defense" == "installed special_capture_defense"
			action
				outfit "combat_ai_special_capture_defense" 1
			`	restoring lost special data: Special: Capture Defense +200...`
				goto "check special_capture_defense"
			label "check special_spinal_mount"
			branch "check special_landing_speed"
				"outfit (flagship installed): combat_ai_special_spinal_mount" == "installed special_spinal_mount"
			action
				outfit "combat_ai_special_spinal_mount" 1
			`	restoring lost special data: Special: Spinal Mount...`
				goto "check special_spinal_mount"
			label "check special_landing_speed"
			branch "check special_recovery_time"
				"outfit (flagship installed): combat_ai_special_landing_speed" == "installed special_landing_speed"
			action
				outfit "combat_ai_special_landing_speed" 1
			`	restoring lost special data: Special: Landing Speed...`
				goto "check special_landing_speed"
			label "check special_recovery_time"
			branch "check special_inscrutable"
				"outfit (flagship installed): combat_ai_special_recovery_time" == "installed special_recovery_time"
			action
				outfit "combat_ai_special_recovery_time" 1
			`	restoring lost special data: Special: Recovery Time...`
				goto "check special_recovery_time"
			label "check special_inscrutable"
			branch "check special_pressure_hull"
				"outfit (flagship installed): combat_ai_special_inscrutable" == "installed special_inscrutable"
			action
				outfit "combat_ai_special_inscrutable" 1
			`	restoring lost special data: Special: Inscrutable...`
				goto "check special_inscrutable"
			label "check special_pressure_hull"
			branch "end"
				"outfit (flagship installed): combat_ai_special_pressure_hull" == "installed special_pressure_hull"
			action
				outfit "combat_ai_special_pressure_hull" 1
			`	restoring lost special data: Special: Pressure Hull...`
				goto "check special_pressure_hull"
			label "end"
			`AI restored!`
				decline